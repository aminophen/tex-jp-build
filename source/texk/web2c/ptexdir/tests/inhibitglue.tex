%#!ptex2pdf
\def\head#1{\par\noindent{\tentt ■\string#1}\par}
\noautospacing \noautoxspacing

%%% unexpandable tokens with non-discardable nodes

\head{\null}
あ）\inhibitglue （あ\par             % ベタ
あ）\null\inhibitglue （あ\par        % 二分アキ
あ）\inhibitglue\null （あ\par        % 二分アキ
あ）\null\inhibitglue\null （あ\par   % 全角アキ【修正前：二分アキ】
あ）\null （あ\par                    % 全角アキ

\head{\unbox}
\def\unbox{\unhcopy200 }
\setbox200=\hbox{}
あ）\inhibitglue （あ\par             % ベタ
あ）\unbox\inhibitglue （あ\par       % 二分アキ
あ）\inhibitglue\unbox （あ\par       % 二分アキ
あ）\unbox\inhibitglue\unbox （あ\par % 全角アキ【修正前：二分アキ】
あ）\unbox （あ\par                   % 全角アキ
\setbox200=\hbox{漢}
あ）\inhibitglue （あ\par             % ベタ
あ）\unbox\inhibitglue （あ\par       % 前二分アキ
あ）\inhibitglue\unbox （あ\par       % 後二分アキ
あ）\unbox\inhibitglue\unbox （あ\par % 前後二分アキ【修正前：前二分アキ】
あ）\unbox （あ\par                   % 前後二分アキ

\head{\vrule}
あ）\inhibitglue （あ\par             % ベタ
あ）\vrule\inhibitglue （あ\par       % 二分アキ
あ）\inhibitglue\vrule （あ\par       % 二分アキ
あ）\vrule\inhibitglue\vrule （あ\par % 全角アキ【修正前：二分アキ】
あ）\vrule （あ\par                   % 全角アキ

\head{\discretionary}
\def\disc{\discretionary{}{}{}}
あ）\inhibitglue （あ\par             % ベタ
あ）\disc\inhibitglue （あ\par        % 二分アキ
あ）\inhibitglue\disc （あ\par        % 二分アキ
あ）\disc\inhibitglue\disc （あ\par   % 全角アキ【修正前：二分アキ】
あ）\disc （あ\par                    % 全角アキ

\head{\special}
\def\spec{\special{}}
あ）\inhibitglue （あ\par             % ベタ
あ）\spec\inhibitglue （あ\par        % 二分アキ
あ）\inhibitglue\spec （あ\par        % 二分アキ
あ）\spec\inhibitglue\spec （あ\par   % 全角アキ【修正前：二分アキ】
あ）\spec （あ\par                    % 全角アキ

\head{\write-1}
\def\tlog{\write-1{}}
あ）\inhibitglue （あ\par             % ベタ
あ）\tlog\inhibitglue （あ\par        % 二分アキ
あ）\inhibitglue\tlog （あ\par        % 二分アキ
あ）\tlog\inhibitglue\tlog （あ\par   % 全角アキ【修正前：二分アキ】
あ）\tlog （あ\par                    % 全角アキ

\head{\insert}
\def\ins{\insert201{}}
あ）\inhibitglue （あ\par             % ベタ
あ）\inhibitglue\ins （あ\par         % 二分アキ
あ）\ins\inhibitglue （あ\par         % 二分アキ
あ）\ins\inhibitglue\ins （あ\par     % 全角アキ【修正前：二分アキ】
あ）\ins （あ\par                     % 全角アキ

\head{\mark}
\def\mrk{\mark{}}
あ）\inhibitglue （あ\par             % ベタ
あ）\inhibitglue\mrk （あ\par         % 二分アキ
あ）\mrk\inhibitglue （あ\par         % 二分アキ
あ）\mrk\inhibitglue\mrk （あ\par     % 全角アキ【修正前：二分アキ】
あ）\mrk （あ\par                     % 全角アキ

\head{\vadjust}
\def\adj{\vadjust{}}
あ）\inhibitglue （あ\par             % ベタ
あ）\inhibitglue\adj （あ\par         % 二分アキ
あ）\adj\inhibitglue （あ\par         % 二分アキ
あ）\adj\inhibitglue\adj （あ\par     % 全角アキ【修正前：二分アキ】
あ）\adj （あ\par                     % 全角アキ

\head{\math}
\def\math{$ $}
あ）\inhibitglue （あ\par             % ベタ
あ）\inhibitglue\math （あ\par        % 二分アキ
あ）\math\inhibitglue （あ\par        % 二分アキ
あ）\math\inhibitglue\math （あ\par   % 全角アキ【修正前：二分アキ】
あ）\math （あ\par                    % 全角アキ

%%% unexpandable tokens with discardable nodes (glue, kern, penalty)

\head{\hskip0pt}
\def\zskip{\hskip0pt}
あ）\inhibitglue （あ\par             % ベタ
あ）\zskip\inhibitglue （あ\par       % 二分アキ
あ）\inhibitglue\zskip （あ\par       % 二分アキ
あ）\zskip\inhibitglue\zskip （あ\par % 全角アキ
あ）\zskip （あ\par                   % 全角アキ

\head{\kern0pt}
\def\zkern{\kern0pt}
あ）\inhibitglue （あ\par             % ベタ
あ）\zkern\inhibitglue （あ\par       % 二分アキ
あ）\inhibitglue\zkern （あ\par       % 二分アキ
あ）\zkern\inhibitglue\zkern （あ\par % 全角アキ
あ）\zkern （あ\par                   % 全角アキ

\head{\penalty10000}
\def\zpena{\penalty10000 }
あ）\inhibitglue （あ\par             % ベタ
あ）\zpena\inhibitglue （あ\par       % 二分アキ
あ）\inhibitglue\zpena （あ\par       % 二分アキ
あ）\zpena\inhibitglue\zpena （あ\par % 全角アキ【修正前：二分アキ】
あ）\zpena （あ\par                   % 全角アキ

%%% unexpandable tokens

\head{\relax}
あ）\inhibitglue （あ\par             % ベタ
あ）\relax\inhibitglue （あ\par       % 二分アキ
あ）\inhibitglue\relax （あ\par       % 二分アキ
あ）\relax\inhibitglue\relax （あ\par % 全角アキ【修正前：二分アキ】
あ）\relax （あ\par                   % 全角アキ

\head{\ignorespaces}
\let\ignsp=\ignorespaces
あ）\inhibitglue （あ\par             % ベタ
あ）\ignsp\inhibitglue （あ\par       % 二分アキ
あ）\inhibitglue\ignsp （あ\par       % ベタ【修正前：二分アキ】
あ）\ignsp\inhibitglue\ignsp （あ\par % 二分アキ
あ）\ignsp （あ\par                   % 全角アキ

\head{\spacefactor1000}
\def\spf{\spacefactor1000 }
あ）\inhibitglue （あ\par             % ベタ
あ）\spf\inhibitglue （あ\par         % 二分アキ
あ）\inhibitglue\spf （あ\par         % ベタ【修正前：二分アキ】
あ）\spf\inhibitglue\spf （あ\par     % 二分アキ
あ）\spf （あ\par                     % 全角アキ

\head{\let}
\def\letab{\let\a\b}
あ）\inhibitglue （あ\par             % ベタ
あ）\letab\inhibitglue （あ\par       % 二分アキ
あ）\inhibitglue\letab （あ\par       % ベタ【修正前：二分アキ】
あ）\letab\inhibitglue\letab （あ\par % 二分アキ
あ）\letab （あ\par                   % 全角アキ

%%% grouping

\head{\group}
あ）（あ\par                 % 一括
あ）{}（あ\par               % 別々
あ）\inhibitglue  {}（あ\par % 左
あ）{}\inhibitglue  （あ\par % 右
あ）{}\inhibitglue{}（あ\par % 左（？）
あ）{\inhibitglue  }（あ\par % 左（？）
あ）\inhibitglue    （あ\par % なし
あ）・あ\par                 % 一括
あ）{}・あ\par               % 別々
あ）{}\inhibitglue  ・あ\par % 左
あ）\inhibitglue  {}・あ\par % 右
あ）{}\inhibitglue{}・あ\par % 左（？）
あ）{\inhibitglue  }・あ\par % 左（？）
あ）\inhibitglue    ・あ\par % なし
あ・（あ\par                 % 一括
あ・{}（あ\par               % 別々
あ・{}\inhibitglue  （あ\par % 左
あ・\inhibitglue  {}（あ\par % 右
あ・{}\inhibitglue{}（あ\par % 左（？）
あ・{\inhibitglue  }（あ\par % 左（？）
あ・\inhibitglue    （あ\par % なし


%%% \unskip vs \inhibitglue (e-pTeX \lastnodesubtype is required)
\ifx\lastnodesubtype\undefined \expandafter\end \fi

\head{\inhibitglue\ test}
\setbox200=\hbox{）\hskip10pt\unskip
  \xdef\gluetype{\the\lastnodetype}%
  \xdef\jfmgluesubtype{\the\lastnodesubtype}}
\protected\def\removejfmglue{%
  \ifnum\lastnodetype=\gluetype\relax
    \ifnum\lastnodesubtype=\jfmgluesubtype\relax
      \unskip
    \fi
  \fi}

あ）\inhibitglue あ\par % 消える
あ）\relax\inhibitglue あ\par % 消えない
あ）\relax\removejfmglue あ\par % 消える【新設】
%% for tabular environment
あ）\hskip20pt\unskip\unskip あ\par % 消える
あ）\hskip20pt\unskip\inhibitglue あ\par % 消えない
あ）\hskip20pt\unskip\removejfmglue あ\par % 消える【新設】


\bye
